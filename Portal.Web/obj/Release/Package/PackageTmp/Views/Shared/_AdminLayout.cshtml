<!DOCTYPE html>
<html ng-app="app">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/Content/main.css" media="screen" />
    <title>@ViewBag.Title</title>

    @if (Request.IsAuthenticated)
    {
        if (User.IsInRole("Administrator"))
        {
<!--Start of Zopim Live Chat Script-->
<script type="text/javascript">
window.$zopim||(function(d,s){var z=$zopim=function(c){z._.push(c)},$=z.s=
d.createElement(s),e=d.getElementsByTagName(s)[0];z.set=function(o){z.set.
_.push(o)};z._=[];z.set._=[];$.async=!0;$.setAttribute('charset','utf-8');
$.src='//v2.zopim.com/?2QFnP7JNYBiZnX0cootwIuscIL8PbKvS';z.t=+new Date;$.
type='text/javascript';e.parentNode.insertBefore($,e)})(document,'script');

$zopim(function () {
    $zopim.livechat.hideAll();
});
</script>
<!--End of Zopim Live Chat Script-->
    if(Session["username"] != null)
     {
        <script>
       $zopim(function(){
           $zopim.livechat.setName('@Session["username"].ToString()');
           $zopim.livechat.setEmail('@Session["email"].ToString()');
        });
        </script>
         
     }

    }
        }
   <!--}-->
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
    @RenderSection("styles", required: false)
    @Scripts.Render("~/bundles/jquery")
    @Styles.Render("~/Content/kendo/css")
    <link href="~/Content/Site.css" rel="stylesheet" />
    <link href="~/assets/css/icons.css" rel="stylesheet" />
    @*TO DO  Make normal hard link to the resource file, because now FF don't see font-awesome icons*@
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <style>
        .navbar {
            background-color: @Session["headerColor"].ToString();
        }
        .dropdown-menu {
            background-color: @Session["headerColor"].ToString();
            border: 1px solid @Session["menuPassiveColor"].ToString();
        }
        .navbar-right li a {
            color: @Session["menuPassiveColor"].ToString();
        }
        .navbar-right li a:hover, .navbar-right li a:focus {
            color: @Session["menuActiveColor"].ToString();
        }
    </style>


</head>
<body>
    @using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm", style = "display:none;" }))
    {
        @Html.AntiForgeryToken()
    }
    
    <script src="http://a.vimeocdn.com/js/froogaloop2.min.js" type="text/javascript"></script>
    <link rel="icon" href="~/favicon.ico" type="image/png">
    <script>

        function RunHelpVideo() {
            $('#helpModal').modal('show');

            Froogaloop("helpplayer").api('play');


        }

        function StoopHelpVideo() {
            $('#helpModal').modal('show');

            Froogaloop("helpplayer").api('stop');


        }
    </script>

    <style type="text/css">
        body {
            font-family: Verdana, Arial, sans-serif;
            font-size: 12px;
        }

        #placeholder {
            width: 375px;
            height: 225px;
        }

        .legend table, .legend > div {
            height: 82px !important;
            opacity: 1 !important;
            left: 270px;
            top: 10px;
            width: 116px !important;
        }

        .legend table {
            padding: 5px;
        }

        .user-avatar {
            float: left;
            border-radius: 4px;
            width: 19px;
            height: 24px;
        }

        .new-icons-top-bar a{

        }

        .new-img-top-bar a img {
            display: inline-block;
            font-style: normal;
            font-weight: normal;
            line-height: 1;
            -webkit-font-smoothing: antialiased;
            height: 26px;
            width: 24px;
            border: solid 1px #BDBDBD;
            border-radius: 4px;
        }

        .new-icons-top-bar i{
            font-size: 2em;
            display: inline-block;
            font-style: normal;
            font-weight: normal;
            line-height: 1;
            -webkit-font-smoothing: antialiased;
            height: 24px;
            width: 19px;
        }

        .notification {
            background-color: #D74C23;
            /* border-radius: 4px; */
            font: bold 11px Arial;
            color: #ffffff;
            line-height: 15px;
            min-width: 15px;
            position: absolute;
            top: 5px;
            right: 2px;
            text-align: center;
            text-shadow: 0 1px 0 rgba(0, 0, 0, 0.1);
            padding-left: 4px;
            padding-right: 4px;
        }

        .top-icon-color{
           color: #717B94;
        }

        .icon-font-size-dm {
            font-size: 16px;
        }

        .nav .open > a, .nav .open > a:hover, .nav .open > a:focus {
            background-color: rgba(0,0,0,0);
            border-color: #428bca;
        }
    </style>

    <div class="navbar navbar-course navbar-fixed-top">
        <div class="container">
            <div class="row">
                <div class="col-lg-2 col-md-3 col-sm-3">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <div class="navbar-brand">
                            <a href="@Url.Action("Index", "Course")">
                                <img class="logo" src="@Session["logoUrl"].ToString()" />
                            </a>
                        </div>
                    </div>
                </div>
                <div class="navbar-collapse collapse">
                    <div class="row">
                        <div class="col-lg-5 col-md-4 col-sm-3">
                            <div class="">
                                <div style="position: absolute;height: 40px;border-left: solid 1px #E1E1E1;margin-top: 40px;" class="hidden-xs"></div>
                                <ul style="float: left;margin-top: 20px;" class="nav navbar-nav course-nav hidden-xs">
                                    <li class="active"><a style="height: 25px;margin-top: 15px;" href="/Admin/Overview" class="disabled">
                                        @if (ViewBag.SubTitle == null)
                                        {
                                            <i class="en-graduation icon-font-size-dm"></i> <span>Kompetanse</span>
                                        }
                                        else
                                        {
                                            <i class="@ViewBag.Icon icon-font-size-dm"></i> @ViewBag.SubTitle
                                        }
                                    </a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-lg-5 col-md-5 col-sm-6">
                            <ul class="nav navbar-nav navbar-right">
                                @if (Request.IsAuthenticated)
                                {
                                    if (User.IsInRole("Administrator"))
                                    {
                                        <li class="hidden-xs">
                                            <a id="dropdownHelp" href="#" class="dropdown-toggle" data-toggle="dropdown"><i class=" fa fa-question-circle"></i></a>
                                            <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUser">
                                                <li class="hidden-xs"><a href="#" id="zopim_chat"><i class="fa fa-comment-alt"></i> Live Chat</a></li>
                                                <li class="hidden-xs"><a href="http://support.easylearn.no/" target="_blank"><i class="fa fa-file-text"></i> Brukermanual</a></li>
                                                <li class="hidden-xs"><a href="#uservoice" id="uv_ideas"><i class="fa fa-lightbulb-o"></i> Post ide</a></li>
                                                <li class="hidden-xs"><a href="#uservoice" id="uv_message"><i class="fa fa-envelope"></i> Kontakt oss</a></li>
                                                <li class="hidden-xs"><a href="#uservoice" id="uv_rating"><i class="fa fa-star"></i> Vurdering</a></li>
                                                <li class="hidden-xs"><a href="#" onclick="UserSnap.openReportWindow();"><i class="fa fa-bug"></i> Rapporter feil</a></li>
                                            </ul>
                                        </li>
                                    }
                                    else
                                    {
                                        <li class="hidden-xs">
                                            <a href="#" onclick="RunHelpVideo();"><i class=" fa fa-question-circle"></i></a>
                                        </li>
                                    }
                                }
                                <li class="hidden new-icons-top-bar"><a href="#"><i class="en-chat"><span class="notification">5</span></i></a></li>
                                @if (Request.IsAuthenticated)
                                {
                                    if (User.IsInRole("Administrator"))
                                    {
                                        <li class="hidden-xs new-icons-top-bar"><a href="/Admin/Overview"><i class="en-pie"></i></a></li>
                                    }
                                }
                                <li class="hidden new-icons-top-bar"><a href="#"><i class="st-book"><span class="notification">5</span></i></a></li>
                               

                                <li class="visible-xs"><a style="color: #C0C4CF" href="/Admin/Overview">
                                    @if (ViewBag.SubTitle == null)
                                    {
                                        <i class="en-graduation icon-font-size-dm"></i> <span>Kompetanse</span>
                                    }
                                    else
                                    {
                                        <i class="@ViewBag.Icon icon-font-size-dm"></i> @ViewBag.SubTitle
                                    }
                                    </a></li>
                                @if (Request.IsAuthenticated)
                                {
                                    if (User.IsInRole("Administrator"))
                                    {
                                        <li class="visible-xs">
                                            <a id="dropdownHelp" href="#" class="dropdown-toggle" data-toggle="dropdown"><i class=" fa fa-question-circle"></i> Hjelp</a>
                                            <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUser">
                                                <li role="presentation"><a href="#" id="zopim_chat"><i class="fa fa-file-text"></i> Zopim</a></li>
                                                <li role="presentation"><a href="http://support.easylearn.no/" target=" _blank"><i class="fa fa-file-text"></i> Brukermanual</a></li>
                                                <li role="presentation"><a href="#uservoice" id="uv_ideas"><i class="fa fa-lightbulb-o"></i> Post ide</a></li>
                                                <li role="presentation"><a href="#uservoice" id="uv_message"><i class="fa fa-envelope"></i> Kontakt oss</a></li>
                                                <li role="presentation"><a href="#uservoice" id="uv_rating"><i class="fa fa-star"></i> Vurdering</a></li>
                                                <li role="presentation"><a href="#" onclick="UserSnap.openReportWindow();"><i class="fa fa-bug"></i> Rapporter feil</a></li>
                                            </ul>
                                        </li>
                                    }
                                    else
                                    {
                                        <li class="visible-xs">
                                            <a href="#" onclick="RunHelpVideo();"><i class=" fa fa-question-circle"></i> Hjelp</a>
                                        </li>
                                    }
                                }
                                <li class="hidden"><a style="color: black" href="#"><i class="en-chat"><span class="notification">5</span></i></a></li>
                                @if (Request.IsAuthenticated)
                                {
                                    if (User.IsInRole("Administrator"))
                                    {
                                        <li class="visible-xs"><a style="color: black" href="/Admin/Overview"><i class="en-pie"></i> Statistikk</a></li>
                                    }
                                }
                                <li class="hidden"><a style="color: black" href="#"><i class="st-book"><span class="notification">5</span></i></a></li>
                                

                                
                                @if (Request.IsAuthenticated)
                                {
                                    if (User.IsInRole("Administrator"))
                                    {
                                        <li class="visible-xs">
                                            <a id="dropdownMenuUser" href="#" style="color: black;font-size: 12px;" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-building-o"></i> Administrator</a>
                                            <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUser">
                                                @*<li role="presentation"><a style="color: black;font-size: 12px;" role="menuitem" tabindex="-1" href="/Admin/Profile"><i style="font-size: 12px;" class="en-vcard"></i> Account</a></li>*@
                                                @if (User.IsInRole("Superadmin"))
                                                {
                                                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/Superadmin/Companys"><i style="position: relative; left: -2px; margin-right: 5px; font-size: 12px;" class="en-house"></i>Company list</a></li>
                                                }
                                                <li role="presentation"><a style="color: black;font-size: 12px;" role="menuitem" tabindex="-1" href="/Admin/"><i style="font-size: 12px;" class="en-users"></i> Brukerliste</a></li>
                                            </ul>
                                        </li>
                                        <li class="dropdown hidden-xs">
                                            <a id="dropdownMenuUser" href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-building-o"></i></a>
                                            <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUser">
                                                @*<li role="presentation"><a role="menuitem" tabindex="-1" href="/Admin/Profile"><i class="en-vcard icon-font-size-dm"></i> Account</a></li>*@
                                                @if (User.IsInRole("Superadmin"))
                                                {
                                                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/Superadmin/Companys"><i style="position: relative; left: -2px; margin-right: 5px;" class="en-house icon-font-size-dm"></i>Company list</a></li>
                                                }
                                                <li role="presentation"><a role="menuitem" tabindex="-1" href="/Admin/"><i class="en-users icon-font-size-dm"></i> Brukerliste</a></li>
                                            </ul>
                                        </li>
                                    }
                                    <li class="dropdown hidden-xs new-img-top-bar">
                                        @*/Admin/Overview*@
                                        <a id="dropdownMenuUser" href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-user"></i><!--<img style="" src="~/assets/img/avatars/48.jpg" alt="" />--></a>
                                        <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUser">
                                            <li role="presentation"><a role="menuitem" tabindex="-1" href="/Admin/Profile"><i style="font-size: 16px;" class="fa fa-user icon-font-size-dm"></i> Min profil</a></li>
                                            <li role="presentation"><a role="menuitem" tabindex="-1" href="javascript:document.getElementById('logoutForm').submit()"><i style="font-size: 16px;" class="fa fa-sign-out icon-font-size-dm"></i> Logg ut</a></li>
                                        </ul>
                                    </li>
                                    <li class="dropdown visible-xs">
                                        @*/Admin/Overview*@
                                        <a id="dropdownMenuUser" style="color: black;" href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-user"></i> Profile</a>
                                        <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUser">
                                            <li role="presentation"><a style="color: black; font-size: 12px;" role="menuitem" tabindex="-1" href="/Admin/Profile"><i class="fa fa-user"></i> Min profil</a></li>
                                            <li role="presentation"><a style="color: black; font-size: 12px;" role="menuitem" tabindex="-1" href="javascript:document.getElementById('logoutForm').submit()"><i class="fa fa-sign-out "></i> Logg ut</a></li>
                                        </ul>
                                    </li>

                                }

                                @*<li class="hidden-xs tooltip-bottom" title="Logg ut"><a href="#"><i class="fa fa-sign-out"></i></a></li>
                        <li class="visible-xs"><a href="#">Logg ut</i></a></li>*@
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    @*<div class="container body-content container-full">*@
    <div id="wrapper">
        @RenderBody()
        <div id="futerStub"></div>
        <div style="clear: both"></div>
    </div>
    
    <!-- Modal -->
    <div class="modal fade" id="helpModal" tabindex="-1" role="dialog" aria-labelledby="videoModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                @*<div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    </div>*@
                <div class="modal-body">
                    <div class="embed-container">
                        <iframe id="helpplayer" src="//player.vimeo.com/video/91166905?api=1&player_id=vimeoplayer" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container" id="futter">
        <footer>
            <div class="row row-nomargin">
                <div class="logo-row col-md-offset-3 col-md-6">
                    <a href="//www.easylearn.no" target="_blank">
                        <img class="granat-logo grayscale" src="~/Content/img/easylearn_logo_footer.png" />
                    </a>
                </div>
            </div>
        </footer>
    </div>

    @Scripts.Render("~/bundles/bootstrap")
    <script src="~/Scripts/angular.js"></script>
    <script src="~/Scripts/ui-bootstrap-0.7.0.js"></script>
    <script src="~/app/app.js"></script>
    @RenderSection("scripts", required: false)

    <script>
        $(function () {
            $('.tooltip-bottom').tooltip({
                delay: { show: 500, hide: 100 },
                placement: 'bottom'
            });
        });
    </script>
    
    <script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-44230319-2', 'granatweb.azurewebsites.net');
    ga('send', 'pageview');

    </script>

    @if (Request.IsAuthenticated)
    {
        if (User.IsInRole("Administrator"))
        {
            <!--End of Zopim Live Chat Script-->
            <!-- for launch usersnap -->
            <script type="text/javascript">
                $(document).ready(function () {
                    (function () {
                        var s = document.createElement("script");
                        s.type = "text/javascript";
                        s.async = true;
                        s.src = '//api.usersnap.com/load/' +
                                'e089ff5b-e39d-4296-8cb3-b55407c048f0.js';
                        var x = document.getElementsByTagName('script')[0];
                        x.parentNode.insertBefore(s, x);
                    })();
                    var _usersnapconfig = {
                        shortcut: true,
                        mode: 'report'
                    };
                });
            </script>
            <!-- for launch uservoice -->
            <script>
                $(document).ready(function () {
                    $('#zopim_chat').on('click', function (e) {
                        e.preventDefault();
                        $zopim.livechat.window.show();
                    });
                    $zopim(function () {
                        $zopim.livechat.window.onHide(function () {
                            $zopim.livechat.hideAll();
                        });
                    });
                });

                // Include the UserVoice JavaScript SDK (only needed once on a page)
                UserVoice = window.UserVoice || []; (function () { var uv = document.createElement('script'); uv.type = 'text/javascript'; uv.async = true; uv.src = '//widget.uservoice.com/Ne9qLCgSkxM9zKYU124NVQ.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(uv, s) })();

                // Set colors
                UserVoice.push(['set', {
                    accent_color: '#448dd6',
                    trigger_color: 'white',
                    trigger_background_color: 'rgba(46, 49, 51, 0.6)',
                    position: 'top-right',
                    target: false
                }]);

                $('#uv_ideas').on('click', function (e) {
                    e.preventDefault();
                    UserVoice.push(['show', {
                        mode: 'smartvote'
                    }]);
                });
                $('#uv_message').on('click', function (e) {
                    e.preventDefault();
                    UserVoice.push(['show', {
                        mode: 'contact'
                    }]);
                });
                $('#uv_rating').on('click', function (e) {
                    e.preventDefault();
                    UserVoice.push(['show', {
                        mode: 'satisfaction'
                    }]);
                });

                UserVoice.push(['autoprompt', {}]);
            </script>
        }
    }
</body>
</html>
